  [1m[36mActiveRecord::SchemaMigration Load (63.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (13.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSheets (20140908105233)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (317.4ms)[0m  [1mCREATE TABLE "sheets" ("id" serial primary key, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (16.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140908105233"]]
  [1m[36m (37.9ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSlots (20140908105400)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (49.7ms)[0m  [1mCREATE TABLE "slots" ("id" serial primary key, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140908105400"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_name_not_null CHECK (name IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "name" does not exist
: ALTER TABLE users ADD CONSTRAINT
      valogy_users_name_not_null CHECK (name IS NOT NULL)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.5ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_name_not_null CHECK (name IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "name" does not exist
: ALTER TABLE users ADD CONSTRAINT
      valogy_users_name_not_null CHECK (name IS NOT NULL)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (80.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (176.6ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_name_not_null CHECK (name IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "name" does not exist
: ALTER TABLE users ADD CONSTRAINT
      valogy_users_name_not_null CHECK (name IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (59.7ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.5ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_name_not_null CHECK (name IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "name" does not exist
: ALTER TABLE users ADD CONSTRAINT
      valogy_users_name_not_null CHECK (name IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users__not_null CHECK ( IS NOT NULL)[0m
PG::SyntaxError: ERROR:  syntax error at or near "NOT"
LINE 2:       valogy_users__not_null CHECK ( IS NOT NULL)
                                                ^
: ALTER TABLE users ADD CONSTRAINT
      valogy_users__not_null CHECK ( IS NOT NULL)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.7ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users__not_null CHECK ( IS NOT NULL)[0m
PG::SyntaxError: ERROR:  syntax error at or near "NOT"
LINE 2:       valogy_users__not_null CHECK ( IS NOT NULL)
                                                ^
: ALTER TABLE users ADD CONSTRAINT
      valogy_users__not_null CHECK ( IS NOT NULL)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_name_not_null CHECK (name IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "name" does not exist
: ALTER TABLE users ADD CONSTRAINT
      valogy_users_name_not_null CHECK (name IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.8ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_name_not_null CHECK (name IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "name" does not exist
: ALTER TABLE users ADD CONSTRAINT
      valogy_users_name_not_null CHECK (name IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (17.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (341.8ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (206.9ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 09:17:07 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 09:17:07 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (47, null, 2014-09-17 09:17:07.668353, 2014-09-17 09:17:07.668353).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[35m (16.9ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (43.4ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (28.1ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 09:19:56 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 09:19:56 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (48, null, 2014-09-17 09:19:56.857563, 2014-09-17 09:19:56.857563).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (108.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 13:24:54 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 13:24:54 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (49, null, 2014-09-17 13:24:54.504471, 2014-09-17 13:24:54.504471).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (3.6ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (7.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (62.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 13:25:26 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 13:25:26 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (50, null, 2014-09-17 13:25:26.273186, 2014-09-17 13:25:26.273186).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (25.2ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (62.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 13:26:25 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 13:26:25 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (51, null, 2014-09-17 13:26:25.617231, 2014-09-17 13:26:25.617231).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (63.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 13:27:02 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 13:27:02 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (52, null, 2014-09-17 13:27:02.516213, 2014-09-17 13:27:02.516213).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (105.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 13:27:57 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 13:27:57 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (53, null, 2014-09-17 13:27:57.450986, 2014-09-17 13:27:57.450986).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.7ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (20.5ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_Sheet_not_null CHECK (Sheet IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_Sheet_not_null CHECK (Sheet IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.5ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_Sheet_not_null CHECK (Sheet IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_Sheet_not_null CHECK (Sheet IS NOT NULL)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (21.8ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.6ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (25.1ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.5ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (21.0ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.5ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (74.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (91.9ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsers (20140604131018)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (6.4ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "username" character varying(255), "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (16.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140604131018"]]
  [1m[36m (15.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateSheets (20140908105233)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (36.8ms)[0m  [1mCREATE TABLE "sheets" ("id" serial primary key, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (33.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140908105233"]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateSlots (20140908105400)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (3.2ms)[0m  [1mCREATE TABLE "slots" ("id" serial primary key, "sheet_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140908105400"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (124.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 17 Sep 2014 15:05:01 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:05:01 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (1, null, 2014-09-17 15:05:01.297237, 2014-09-17 15:05:01.297237).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.7ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.9ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.1ms)[0m  INSERT INTO "slots" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 17 Sep 2014 15:12:44 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:12:44 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "slots" violates check constraint "valogy_slots_sheet_id_not_null"
DETAIL:  Failing row contains (1, null, 2014-09-17 15:12:44.865802, 2014-09-17 15:12:44.865802).
: INSERT INTO "slots" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[36m (2.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "slots" ("created_at", "sheet_id", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 15:12:44 UTC +00:00], ["sheet_id", 1], ["updated_at", Wed, 17 Sep 2014 15:12:44 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slot_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_slot_sheet_id_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 17 Sep 2014 15:12:44 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:12:44 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (2, null, 2014-09-17 15:12:44.903462, 2014-09-17 15:12:44.903462).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "username") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 15:12:44 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:12:44 UTC +00:00], ["username", "foobar"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.5ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slot_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.6ms)[0m  INSERT INTO "slots" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 17 Sep 2014 15:16:02 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:16:02 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "slots" violates check constraint "valogy_slots_sheet_id_not_null"
DETAIL:  Failing row contains (3, null, 2014-09-17 15:16:02.06635, 2014-09-17 15:16:02.06635).
: INSERT INTO "slots" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.5ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "slots" ("created_at", "sheet_id", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 15:16:02 UTC +00:00], ["sheet_id", 1], ["updated_at", Wed, 17 Sep 2014 15:16:02 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 17 Sep 2014 15:16:02 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:16:02 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (4, null, 2014-09-17 15:16:02.1039, 2014-09-17 15:16:02.1039).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "username") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 15:16:02 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:16:02 UTC +00:00], ["username", "foobar"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.7ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.1ms)[0m  INSERT INTO "slots" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 17 Sep 2014 15:20:42 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:20:42 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "slots" violates check constraint "valogy_slots_sheet_id_not_null"
DETAIL:  Failing row contains (5, null, 2014-09-17 15:20:42.761028, 2014-09-17 15:20:42.761028).
: INSERT INTO "slots" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "slots" ("created_at", "sheet_id", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 15:20:42 UTC +00:00], ["sheet_id", 1], ["updated_at", Wed, 17 Sep 2014 15:20:42 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 17 Sep 2014 15:20:42 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:20:42 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (6, null, 2014-09-17 15:20:42.797656, 2014-09-17 15:20:42.797656).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "username") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Wed, 17 Sep 2014 15:20:42 UTC +00:00], ["updated_at", Wed, 17 Sep 2014 15:20:42 UTC +00:00], ["username", "foobar"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.5ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (95.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (42.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (14.9ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (43.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (15.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (120.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (72.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (88.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (121.8ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)[0m
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 2:       valogy_sheets_user_minimal ((SELECT COUNT(*) FROM shee...
                                         ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 2:       valogy_sheets_user_minimal ((SELECT COUNT(*) FROM shee...
                                         ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 2:       valogy_sheets_user_minimal ((SELECT COUNT(*) FROM shee...
                                         ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)[0m
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 2:       valogy_sheets_user_minimal ((SELECT COUNT(*) FROM shee...
                                         ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 2:       valogy_sheets_user_minimal ((SELECT COUNT(*) FROM shee...
                                         ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 2:       valogy_sheets_user_minimal ((SELECT COUNT(*) FROM shee...
                                         ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (219.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (206.9ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)[0m
PG::SyntaxError: ERROR:  syntax error at or near ")"
LINE 2: ...imal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
                                                                 ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
PG::SyntaxError: ERROR:  syntax error at or near ")"
LINE 2: ...imal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
                                                                 ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (42.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
PG::SyntaxError: ERROR:  syntax error at or near ")"
LINE 2: ...imal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
                                                                 ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)[0m
PG::SyntaxError: ERROR:  syntax error at or near ")"
LINE 2: ...imal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
                                                                 ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
PG::SyntaxError: ERROR:  syntax error at or near ")"
LINE 2: ...imal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
                                                                 ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
PG::SyntaxError: ERROR:  syntax error at or near ")"
LINE 2: ...imal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
                                                                 ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = ) > 0)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (39.8ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user = > 0)[0m
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 2:       valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM...
                                                ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user =  > 0)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user = > 0)
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 2:       valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM...
                                                ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user =  > 0)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user = > 0)
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 2:       valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM...
                                                ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user =  > 0)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user = > 0)[0m
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 2:       valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM...
                                                ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user =  > 0)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user = > 0)
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 2:       valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM...
                                                ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user =  > 0)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user = > 0)
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 2:       valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM...
                                                ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (SELECT COUNT(*) FROM sheets WHERE user =  > 0)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (14.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (40.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (1.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (79.3ms)[0m  [1mCREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "OR"
LINE 1: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_us...
                        ^
: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (27.8ms)[0m  CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "OR"
LINE 1: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_us...
                        ^
: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.4ms)[0m  CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "OR"
LINE 1: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_us...
                        ^
: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mCREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "OR"
LINE 1: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_us...
                        ^
: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "OR"
LINE 1: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_us...
                        ^
: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.3ms)[0m  CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "OR"
LINE 1: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_us...
                        ^
: CREATE FUNCTION OR REPLACE valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (899.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 5:         IF COUNT(*) > 0 THEN true ELSE false
                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (41.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 5:         IF COUNT(*) > 0 THEN true ELSE false
                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 5:         IF COUNT(*) > 0 THEN true ELSE false
                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 5:         IF COUNT(*) > 0 THEN true ELSE false
                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.0ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 5:         IF COUNT(*) > 0 THEN true ELSE false
                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF COUNT(*) > 0 THEN true ELSE false
 FROM sheets WHERE user = $1
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "("
LINE 5:         IF COUNT(*) > 0 THEN true ELSE false
                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF COUNT(*) > 0 THEN true ELSE false
        FROM sheets WHERE user = $1
        $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (111.7ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 T...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 T...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (16.2ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 T...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 T...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 T...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 T...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF SELECT COUNT(*) FROM sheets WHERE user = $1 > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (35.8ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (28.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
        $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (24.3ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 3:      $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 3:      $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 3:      $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 3:      $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 3:      $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 3:      $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$ IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 END IF;
 END
 LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "BEGIN"
LINE 3:      BEGIN
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     BEGIN
     IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     END IF;
     END
      LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 END IF;
 END
 LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "BEGIN"
LINE 3:      BEGIN
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     BEGIN
     IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     END IF;
     END
      LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.4ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 END IF;
 END
 LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "BEGIN"
LINE 3:      BEGIN
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     BEGIN
     IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     END IF;
     END
      LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 END IF;
 END
 LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "BEGIN"
LINE 3:      BEGIN
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     BEGIN
     IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     END IF;
     END
      LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.1ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 END IF;
 END
 LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "BEGIN"
LINE 3:      BEGIN
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     BEGIN
     IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     END IF;
     END
      LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.4ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
 END IF;
 END
 LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "BEGIN"
LINE 3:      BEGIN
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     BEGIN
     IF (SELECT COUNT(*) FROM sheets WHERE user = $1;) > 0 THEN true ELSE false
     END IF;
     END
      LANGUAGE 'sql';
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (35.9ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THE...
                                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THE...
                                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THE...
                                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THE...
                                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THE...
                                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THE...
                                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user) FROM sheets WHERE user = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (16.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user_id) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(user_id)  > 0 THEN true ELSE false
                                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user_id)  > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user_id) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(user_id)  > 0 THEN true ELSE false
                                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user_id)  > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user_id) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(user_id)  > 0 THEN true ELSE false
                                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user_id)  > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user_id) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(user_id)  > 0 THEN true ELSE false
                                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user_id)  > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user_id) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(user_id)  > 0 THEN true ELSE false
                                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user_id)  > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(user_id) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(user_id)  > 0 THEN true ELSE false
                                        ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(user_id)  > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.7ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > ...
                   ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > ...
                   ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (1.9ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > ...
                   ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > ...
                   ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > ...
                   ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > ...
                   ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF SELECT COUNT(*) FROM sheets WHERE user_id = $1 > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.8ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "SELECT"
LINE 5:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "WHERE"
LINE 5:         IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE ...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "WHERE"
LINE 5:         IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE ...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (1.0ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "WHERE"
LINE 5:         IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE ...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "WHERE"
LINE 5:         IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE ...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "WHERE"
LINE 5:         IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE ...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (2.1ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "WHERE"
LINE 5:         IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE ...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*)) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(*)) > 0 THEN true ELSE false
                                  ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*)) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*)) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(*)) > 0 THEN true ELSE false
                                  ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*)) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*)) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(*)) > 0 THEN true ELSE false
                                  ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*)) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*)) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(*)) > 0 THEN true ELSE false
                                  ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*)) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*)) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(*)) > 0 THEN true ELSE false
                                  ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*)) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*)) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "THEN"
LINE 5:         IF (COUNT(*)) > 0 THEN true ELSE false
                                  ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*)) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (19.0ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 4:      count := SELECT COUNT(*) FROM sheets WHERE user = $1
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     count := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 4:      count := SELECT COUNT(*) FROM sheets WHERE user = $1
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     count := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (1.0ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 4:      count := SELECT COUNT(*) FROM sheets WHERE user = $1
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     count := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 4:      count := SELECT COUNT(*) FROM sheets WHERE user = $1
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     count := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 4:      count := SELECT COUNT(*) FROM sheets WHERE user = $1
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     count := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 4:      count := SELECT COUNT(*) FROM sheets WHERE user = $1
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     count := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 5:      count integer := SELECT COUNT(*) FROM sheets WHERE user...
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     BEGIN
     count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 5:      count integer := SELECT COUNT(*) FROM sheets WHERE user...
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     BEGIN
     count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.9ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 5:      count integer := SELECT COUNT(*) FROM sheets WHERE user...
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     BEGIN
     count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 5:      count integer := SELECT COUNT(*) FROM sheets WHERE user...
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     BEGIN
     count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 5:      count integer := SELECT COUNT(*) FROM sheets WHERE user...
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     BEGIN
     count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "count"
LINE 5:      count integer := SELECT COUNT(*) FROM sheets WHERE user...
             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     BEGIN
     count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (26.9ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "integer"
LINE 5:       count integer := SELECT COUNT(*) FROM sheets WHERE use...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "integer"
LINE 5:       count integer := SELECT COUNT(*) FROM sheets WHERE use...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "integer"
LINE 5:       count integer := SELECT COUNT(*) FROM sheets WHERE use...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "integer"
LINE 5:       count integer := SELECT COUNT(*) FROM sheets WHERE use...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "integer"
LINE 5:       count integer := SELECT COUNT(*) FROM sheets WHERE use...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (1.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "integer"
LINE 5:       count integer := SELECT COUNT(*) FROM sheets WHERE use...
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count integer := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near ":="
LINE 5:       count := SELECT COUNT(*) FROM sheets WHERE user = $1
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near ":="
LINE 5:       count := SELECT COUNT(*) FROM sheets WHERE user = $1
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near ":="
LINE 5:       count := SELECT COUNT(*) FROM sheets WHERE user = $1
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near ":="
LINE 5:       count := SELECT COUNT(*) FROM sheets WHERE user = $1
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near ":="
LINE 5:       count := SELECT COUNT(*) FROM sheets WHERE user = $1
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 DECLARE
 count := SELECT COUNT(*) FROM sheets WHERE user = $1
 BEGIN
 SELECT
 IF count > 1 THEN true ELSE false
 END
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near ":="
LINE 5:       count := SELECT COUNT(*) FROM sheets WHERE user = $1
                    ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     DECLARE
      count := SELECT COUNT(*) FROM sheets WHERE user = $1
     BEGIN
     SELECT
        IF count > 1 THEN true ELSE false
     END
     $$ LANGUAGE 'sql';
  [1m[36m (1.5ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (24.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (91.4ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.9ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 SELECT
 IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "FROM"
LINE 5:         IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THE...
                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
     SELECT
        IF (COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'sql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'sql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (87.2ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'plpgsql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'plpgsql';
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (13.3ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'plpgsql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'plpgsql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (29.0ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 END IF;
 $$ LANGUAGE 'plpgsql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
        END IF;
     $$ LANGUAGE 'plpgsql';
  [1m[35m (1.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 END IF;
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
        END IF;
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 END IF;
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
        END IF;
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 END IF;
 $$ LANGUAGE 'plpgsql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
        END IF;
     $$ LANGUAGE 'plpgsql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 END IF;
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
        END IF;
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (3.3ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
 END IF;
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "IF"
LINE 4:         IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) ...
                ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
        IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN true ELSE false
        END IF;
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (42.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (63.9ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.3ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.4ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.5ms)[0m  BEGIN
  [1m[36m (143.7ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (42.6ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (4.0ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.8ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1253.8ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (276.1ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)
PG::FeatureNotSupported: ERROR:  cannot use subquery in check constraint
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)
PG::FeatureNotSupported: ERROR:  cannot use subquery in check constraint
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.5ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)[0m
PG::FeatureNotSupported: ERROR:  cannot use subquery in check constraint
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)[0m
PG::FeatureNotSupported: ERROR:  cannot use subquery in check constraint
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.3ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)[0m
PG::FeatureNotSupported: ERROR:  cannot use subquery in check constraint
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (62.4ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)
PG::FeatureNotSupported: ERROR:  cannot use subquery in check constraint
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK ((SELECT COUNT(*) FROM sheets WHERE user = $1) > 0)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (92.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (43.9ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.3ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (122.3ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (29.7ms)[0m  [1mCREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (40.1ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK foo())
PG::SyntaxError: ERROR:  syntax error at or near "foo"
LINE 2:       valogy_sheets_user_minimal CHECK foo())
                                               ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK foo())
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK foo())
PG::SyntaxError: ERROR:  syntax error at or near "foo"
LINE 2:       valogy_sheets_user_minimal CHECK foo())
                                               ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK foo())
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK foo())[0m
PG::SyntaxError: ERROR:  syntax error at or near "foo"
LINE 2:       valogy_sheets_user_minimal CHECK foo())
                                               ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK foo())
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.3ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK foo())[0m
PG::SyntaxError: ERROR:  syntax error at or near "foo"
LINE 2:       valogy_sheets_user_minimal CHECK foo())
                                               ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK foo())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK foo())[0m
PG::SyntaxError: ERROR:  syntax error at or near "foo"
LINE 2:       valogy_sheets_user_minimal CHECK foo())
                                               ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK foo())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.5ms)[0m  [1mCREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK foo())
PG::SyntaxError: ERROR:  syntax error at or near "foo"
LINE 2:       valogy_sheets_user_minimal CHECK foo())
                                               ^
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK foo())
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (54.9ms)[0m  [1mCREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (22.9ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (foo())
PG::UndefinedFunction: ERROR:  function foo() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (foo())
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (foo())
PG::UndefinedFunction: ERROR:  function foo() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (foo())
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (foo())[0m
PG::UndefinedFunction: ERROR:  function foo() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (foo())
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (foo())[0m
PG::UndefinedFunction: ERROR:  function foo() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (foo())
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (foo())[0m
PG::UndefinedFunction: ERROR:  function foo() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (foo())
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION foo(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (foo())
PG::UndefinedFunction: ERROR:  function foo() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (foo())
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (38.3ms)[0m  [1mCREATE OR REPLACE FUNCTION foo(object_id)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
PG::UndefinedObject: ERROR:  type object_id does not exist
: CREATE OR REPLACE FUNCTION foo(object_id)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
PG::UndefinedObject: ERROR:  type object_id does not exist
: CREATE OR REPLACE FUNCTION foo(object_id)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
PG::UndefinedObject: ERROR:  type object_id does not exist
: CREATE OR REPLACE FUNCTION foo(object_id)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mCREATE OR REPLACE FUNCTION foo(object_id)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
PG::UndefinedObject: ERROR:  type object_id does not exist
: CREATE OR REPLACE FUNCTION foo(object_id)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
PG::UndefinedObject: ERROR:  type object_id does not exist
: CREATE OR REPLACE FUNCTION foo(object_id)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION foo(object_id)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
PG::UndefinedObject: ERROR:  type object_id does not exist
: CREATE OR REPLACE FUNCTION foo(object_id)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (102.9ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (34.1ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (100.1ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (26.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.5ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets() does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets())
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (16.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "{"
LINE 1: ...R REPLACE FUNCTION valogy_check_minimal_occurence_{column}_o...
                                                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "{"
LINE 1: ...R REPLACE FUNCTION valogy_check_minimal_occurence_{column}_o...
                                                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "{"
LINE 1: ...R REPLACE FUNCTION valogy_check_minimal_occurence_{column}_o...
                                                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
PG::SyntaxError: ERROR:  syntax error at or near "{"
LINE 1: ...R REPLACE FUNCTION valogy_check_minimal_occurence_{column}_o...
                                                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "{"
LINE 1: ...R REPLACE FUNCTION valogy_check_minimal_occurence_{column}_o...
                                                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.3ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
PG::SyntaxError: ERROR:  syntax error at or near "{"
LINE 1: ...R REPLACE FUNCTION valogy_check_minimal_occurence_{column}_o...
                                                             ^
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_{column}_on_{table}(object_id integer)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (29.1ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (20.7ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (29.2ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.5ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (58.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (55.8ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsers (20140604131018)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (61.0ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "username" character varying(255), "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (81.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140604131018"]]
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateSheets (20140908105233)
  [1m[35m (15.8ms)[0m  BEGIN
  [1m[36m (4.3ms)[0m  [1mCREATE TABLE "sheets" ("id" serial primary key, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (26.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140908105233"]]
  [1m[36m (1.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateSlots (20140908105400)
  [1m[35m (15.6ms)[0m  BEGIN
  [1m[36m (2.9ms)[0m  [1mCREATE TABLE "slots" ("id" serial primary key, "sheet_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140908105400"]]
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (85.3ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (20.7ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (13.8ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.5ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.3ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (129.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (35.5ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (19.2ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (23.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.6ms)[0m  df
PG::SyntaxError: ERROR:  syntax error at or near "df"
LINE 1: df
        ^
: df
  [1m[36m (0.4ms)[0m  [1m\df[0m
PG::SyntaxError: ERROR:  syntax error at or near "\"
LINE 1: \df
        ^
: \df
  [1m[35m (14.9ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
     RETURNS boolean AS
     $$
      BEGIN
        IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
        END IF;
      END
     $$ LANGUAGE 'plpgsql';
  [1m[36m (0.4ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.8ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' 
  [1m[36m (2.4ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.6ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))[0m
PG::UndefinedFunction: ERROR:  function valogy_check_minimal_occurence_user_on_sheets(name) does not exist
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: ALTER TABLE sheets ADD CONSTRAINT
      valogy_sheets_user_minimal CHECK (valogy_check_minimal_occurence_user_on_sheets(user))
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (18.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.3ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsers (20140604131018)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (4.3ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "username" character varying(255), "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (17.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140604131018"]]
  [1m[36m (15.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateSheets (20140908105233)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (3.1ms)[0m  [1mCREATE TABLE "sheets" ("id" serial primary key, "user_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140908105233"]]
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateSlots (20140908105400)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (3.4ms)[0m  [1mCREATE TABLE "slots" ("id" serial primary key, "sheet_id" integer, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20140908105400"]]
  [1m[36m (28.3ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (21.6ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (21.8ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))
  [1m[36m (19.7ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "user_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
  [1m[35m (1.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.8ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
PG::UndefinedColumn: ERROR:  column "user_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (18.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
PG::UndefinedColumn: ERROR:  column "user_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))
  [1m[36m (0.4ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "user_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
PG::UndefinedColumn: ERROR:  column "user_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
PG::UndefinedColumn: ERROR:  column "user_id" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_user_id_not_null CHECK (user_id IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (2.1ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))
  [1m[36m (18.9ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))
  [1m[36m (0.4ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)[0m
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
PG::UndefinedColumn: ERROR:  column "sheet" does not exist
: ALTER TABLE slots ADD CONSTRAINT
      valogy_slots_sheet_not_null CHECK (sheet IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (2.0ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))
  [1m[36m (0.4ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (107.2ms)[0m  INSERT INTO "slots" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Fri, 24 Oct 2014 10:55:20 UTC +00:00], ["updated_at", Fri, 24 Oct 2014 10:55:20 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "slots" violates check constraint "valogy_slots_sheet_id_not_null"
DETAIL:  Failing row contains (1, null, 2014-10-24 10:55:20.127003, 2014-10-24 10:55:20.127003).
: INSERT INTO "slots" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[36m (7.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (21.1ms)[0m  [1mINSERT INTO "slots" ("created_at", "sheet_id", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 24 Oct 2014 10:55:21 UTC +00:00], ["sheet_id", 1], ["updated_at", Fri, 24 Oct 2014 10:55:21 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' [0m
  [1m[35m (2.6ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.9ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_slots_sheet_id_not_null' 
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mCREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))
  [1m[36m (0.5ms)[0m  [1mALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Fri, 24 Oct 2014 10:55:23 UTC +00:00], ["updated_at", Fri, 24 Oct 2014 10:55:23 UTC +00:00]]
PG::CheckViolation: ERROR:  new row for relation "users" violates check constraint "valogy_users_username_not_null"
DETAIL:  Failing row contains (1, null, 2014-10-24 10:55:23.975429, 2014-10-24 10:55:23.975429).
: INSERT INTO "users" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.8ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.6ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (20.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "username") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", Fri, 24 Oct 2014 10:55:25 UTC +00:00], ["updated_at", Fri, 24 Oct 2014 10:55:25 UTC +00:00], ["username", "foobar"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' [0m
  [1m[35m (1.8ms)[0m  CREATE OR REPLACE FUNCTION valogy_check_minimal_occurence_user_id_on_sheets(object_id integer)
 RETURNS boolean AS
 $$
 BEGIN
 IF (SELECT COUNT(*) FROM sheets WHERE user_id = $1) > 0 THEN return true; ELSE return false;
 END IF;
 END
 $$ LANGUAGE 'plpgsql';
  [1m[36m (0.7ms)[0m  [1mALTER TABLE sheets ADD CONSTRAINT
 valogy_sheets_user_id_minimal CHECK (valogy_check_minimal_occurence_user_id_on_sheets(user_id))[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE slots ADD CONSTRAINT
 valogy_slots_sheet_id_not_null CHECK (sheet_id IS NOT NULL)
  [1m[36m (0.6ms)[0m  [1mALTER TABLE users ADD CONSTRAINT
 valogy_users_username_not_null CHECK (username IS NOT NULL)[0m
  [1m[35m (0.3ms)[0m  SELECT * FROM pg_constraint WHERE conname='valogy_users_username_not_null' 
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
